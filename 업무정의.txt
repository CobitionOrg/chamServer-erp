발송목록 순서 정의
     환불 (-4)
     교환 (-3)
     누락 (-2)
     방문 (-1)
     별도 (0)
     1. 일반(투명, 1)
     2. 특이(보라 2) - 폭식환 추가 구매, 서비스 변경, 후기 서비스, 패키지 변경 등 잡다
     3. 챌린지(초록 3) - 인스타에 글 쓴 애들
     4. 지인(노랑 4) - 설문지에 지인 쓰고 기존 환자 리스트에서 확인 된 환자
     5. 구수방(분홍 5) - 설문지에 구수방 써져있으면 구수방 - 구미수다방/ 구미맘카페/ 구미맘/ 구수방 써져있으면 적용
     합배송(6)
     분리배송(7)

교환,누락은 이미 발송된 택배를 다시 교환하거나 누락된 부분에 한해서 넣는 오더로 간호사들이 직접 오더를 넣을 수 있어야함
합배송 처리는 order 테이블에 combineNum을 추가해서 정렬(합배송 안에서도 정렬이 필요하기 때문)
분리배송은 하나의 주문을 두 군데로 나눠서 발송처리...order 테이블은 그대로 두고 -> 챠팅이랑 장부에서는 원래 오더로 나와야 됨
tempOrder에서 쪼개기 -> 분리배송은 orderItem을 키인으로 정의 -> 기존 orderItem은 order에 묶여있어서
orderItem은 그대로 두고(기존 오더는 변경이 안되어야 되기 때문에) tempOrderItem 테이블을 만들어 거기에 키인된
아이템들 저장(즉 해당 테이블은 분리배송일 때만 사용되는 테이블이라 할 수 있음. 프론트에서 렌더링 할 때 필터링 걸어서
렌더링)


발송목록은 전체 페이지에 다 보여야됨
다만 수정가능해야됨


발송목록은 오더 아이템에서 보조 처방을 제외하고 감/쎈/요를 각각 1개로 생각해서
350개 선으로 끊어야 함.



-발송목록 일자 관련
     발송목록 title은 나가는 일자로 표시해주길 원함
     발송은 월화목금 나가는데 공휴일도 빠지는 경우가 발생
     현재에는 만들어지는 날짜가 title임
     -> 월화목금으로 만들어지고 공휴일인 경우 직접 수정으로 변경



-상담 완료 및 발송목록으로 이동처리에 관한 로직 정리(헷갈려서 적어놓습니다)
     입금상담목록에서 상담완료 처리
     -> POST /completeConsulting/:id

     위 api에서 발송목록 로직 (새로 만들어야 하는지, 아니면 기존 발송목록에 넣을지)
     에 따라 발송목록 id를 외래키로 받아 temp order 생성
     -temp order를 만드는 이유는 order가 수정될 시에도 발송목록에서 순서가 변하지 않도록 조정하는 역할(따라서 발송목록에서 데이터를 조회할 시에는 무조건 tempOrder 테이블에서 조회하게 된다.)

     발송목록 조회 시
     -> GET /sendList/:id
     위 완료 처리 과정에서 상술한데로 해당 sendList id로 데이터를 조회,
     tempOrder 테이블에서 오더를 가져오며(따라서 오더 수정 시에 order,tempOrder 둘 다 수정되어야 함) orderSortNum으로 일단은 정렬해서 가져옴



     1. 입금/상담목록 

     -> 표 글씨 크키 2p 올려줘

     -> 위 카테고리 순서는
     설문지번호/초재진/추천인/감량킬로수/이름/환개월수/결제방법/특이사항/현영/핸드폰번호/주소 

     -> 조회 시 날짜선택 일자까지 

     -> 상담여부의 존재는 어떤건지? 
     -> 상담완료 시 상담여부에 체크하도록 하고, 카톡상담완료버튼도 만들기 

     -> 환개월수 수정 시 보이는 건 너무 커서 한번에 다 보이길 원함
     (체크칸 추가)

     -> 입금/상담목록에서는 차팅엑셀다운 못받게

     -> 신환 엑셀다운받았을 떄 순서는
     주소/주민번호(중간하이푼넣기)/이름/핸드폰번호(하이푼넣기)/설문지번호(초진0000/재진0000)/특이사항(추천인) 

     -> 특이사항/배송요청메시지 칸은 나눠지는게 좋을듯함

     2. 발송목록 
     -> 발송목록엑셀다운로드 받았을때 주문수량에 서비스감비환도 체크해서 넣어주기 원함 (ex.감2개월(s10))

     -> 더블클릭하면 수정되는 거 같은데 핸드폰번호/현금영수증카드도 수정할 수 있으면 좋겠음 

     -> 폭식환별도구매시, 1포당 천원 + 택배비3500원 본인부담
          워밍업, 감비환별도구매시 , 1포당 1300원 +택배비3500원
          요요,쎈 별도구매 시, 1포당 1700원 + 택배비3500원
          감1,쎈1, 요3 구매 시  택배비 3500원 

     -> 발송목록 순서
          개월수 
          ㄴ감비환->쎈-> 요요 
     일반/특이/챌린지/지인/구수방
          ㄴ입금/카드

     -> 개인정보 암호화 처리



     -> 재진 후기 안내 탭 추가
          재진 후기 중(특정 조건 감량 혹은 감량 킬로 수 적은 사람들만) 따로 볼 수 있게 해서 해당 환자들에게 후기 안내할 수 있기
          그리고 후기 안내 후 비고 란에 후기를 작성했는지 안했는지 여부 작성 칸 추가

     -> 교환/환불/누락 관련
          -따로 상세 페이지 만들기로...
          -어차피 해당 건들은 모두 발송이 나간 데이터들을 상대로 발생
          -따라서 발송목록 페이지에서 이미 발송 나간 데이터들을 조회한 후 해당
          데이터를 카피해 교환/환불/누락 건으로 새 오더 생성.
          -orderSortNum으로 상세페이지에서 조회 후 처리
          -환불 건은 완료 처리 후 따로 해야 될 건 없고
          -교환,환불 건은 발송목록으로 이동처리에

     -> 파일 다운은 지정된 ip만 다운 받을 수 있게 허용

     -> 계좌이체, 카드로 결제한거 디비에 저장하는걸로 하기로'

     -> 장부 관련
          장부에서는 tempOrder에서 발송목록 기준에서 리스트를 뽑아냄. 다만 발송목록과 발송일자가 다른 요청을 한 주문이 있어
          따로 비고 칸에 적어 넣기로 함.(발송목록에 팝업으로 비고를 적는 칸 추가, sendListTable에 들어감)

          발송목록에서 수정 여부 판단을 해야되서 (재차팅을 해야되기 때문) 
               주소변경
               결제수단변경
               후기추가
               폭식환추가
               챌린지추가
               수량변경 
               특이추가 
          해당 리스트 체크 박스로 체크해서 수정 여부 초록색으로 칠하기     

     -> 현금 영수증 할 지 안 할지 체크하는 칸 필요

     -> 구수방,지인,파주맘 -> 각각 구수방, 지인 10포, 파주맘

     -> 합배송 입금 완료 처리 발송목록으로 넘어가는거 확인(두 주문 다 한번에)

     -> 발송목록에서 주문 취소 시 따로 볼 수 있는 칸 필요

     

     

미비 된 부분
- 현금 영수증 할 지 안 할지 체크하는 칸 필요 - 윤태
- 프론트에서 에러처리(에러코드를 받았을 때의 에러 처리) - 윤태
- 카톡 발송 - 병규
- 업무 정의 문서 - 기원
- 업무 플로우 테스트 - 기원,준영
- 발송목록에서 특이사항,배송요청메세지 칸 나누는거 필요 - 윤태
- 기존 환자 데이터 엑셀 삽입 - 윤태
- 엑셀 파일 -> 장부 디자인 필요 - 준영
- 윤태님은 항상 프론트 쪽 최신 배포 부탁드립니다.


     -> 카톡 자동 발송

     -> 업무 정의 문서

     -> 프론트 에러처리

     -> 엑셀 파일 확인

     -> 취소된 주문 보는 페이지

     -> 주문 수정 표시

     -> 금액 확인 테스트

     -> 발송목록에서 데이터 수정 시 분리배송, 합배송 가격 체크 필요

나중에 해도 되는거
- https - 병규
- 서버 부하 테스트 - 윤태
- api 문서 - 준영

